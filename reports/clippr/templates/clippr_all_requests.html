<title>ClipprAllRequest Reports</title>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
<style>

  #dataTable thead tr, #dashboard thead tr {
	/* background-color: #EBEBEB; */
	background-color: white;
	font-size: 14px;
	font-family: Segoe UI Semibold;
}

.header{
  position: fixed;
  top:2px;
  background-color: black;
  width: 100%;
  height: 73px;
}

.img_pos{
  position: relative;
  top:20px;
  left:22px;
}

#dataTable thead tr th, #dashboard thead tr th {
	padding-bottom: 14px;
	border: none;
	padding-top: 15px;
	padding-left: 15px;
}

#dataTable tbody tr, #dashboard tbody tr {
	counter-increment: rowNumber;
	/* background-color: #e6e4e4; */
	background-color: white;
	
}

#dataTable tbody tr td:first-child::before, #dashboard tbody tr td:first-child::before
	{
	content: counter(rowNumber);
	min-width: 1em;
	margin-right: 0.5em;
	padding-left: 13px;
}

/* #dataTable tbody tr td:first-child, #dashboard tbody tr td:first-child {
	border-right: 2px solid #EBEBEB;
} */



#dataTable tbody tr td, #dashboard tbody tr td { 
	border-bottom: 2px solid #EBEBEB;
}

#dataTable tbody tr td:, #dashboard tbody tr td:first-child {
	border-right: 2px solid #EBEBEB;
}

#dataTable tbody tr td, #dashboard tbody tr td {
	color: #000000;
	vertical-align: middle;
  text-align: center;
}
  #dataTable tbody, #dashboard tbody {
	font-size: 14px;
}

#dashboard tbody, #dashboard tbody {
	font-size: 14px;
}

#dataTable tbody tr:nth-child(odd), #dashboard tbody tr:nth-child(odd) {
	/* background-color: #FFF; */
	background-color: white;
}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}





</style>

<div class="header"> <img class="img_pos" src="https://d1q9zt8mabqinx.cloudfront.net/landing-page/home/logo/Spyne-White-Full-Logo.png" alt="spyne" width="140"> </img> </div> 


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">


<h2 style="font-family: Roboto;font-size: 24px; margin-top: 6.5%;">Clippr - AllRequest</h2>

<div class="container">


	<div class="tab">
		<button class="tablinks" onclick="opentimeZone(event, 'Table')">Table</button>
		<button class="tablinks" onclick="opentimeZone(event, 'Graph')">Graph</button>
	</div>


<div id="Table" class="tabcontent">
  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive" data-pattern="priority-columns">
        <table id="dataTable" class="table data-lead-table dataTable no-footer">
          <thead style="border-bottom: 5px solid black;">
		  <tr>
			   <th>No</th>
			   <th>Product Category</th>
			   <th>Product SubCategory</th>
			   <th>API Log Source</th>
		    <th>User Id</th>
			<th>Free trial Email</th>
			<th>Authenticated Email</th>
		    <th>Timestamp</th>
			<th>Image category</th>
			<th>Processing Time</th>
		    <th>Img Resolution(height*width)</th>
		    <th>Img Size</th>
		    <th>Img downloaded (low res)</th>
			<th>Img downloaded (high res)</th>
			<th>Feedback</th>
			<th>ip address</th>
            <th>BrowserName</th>
            <th>Location(latitude and longitude)</th>
            <th>BrowserLanguage</th>
		    <th>InputImageURL</th>
			<th>OutputImageURL</th>
			<th>otp verified</th>
		  </tr>
          </thead>
          <tbody>
			{% for item in rows %}
			<tr>
				<td></td>
				<td>{{item[1]}}</td>

				<td>{{item[2]}}</td>
				<td>{{item[3]}}</td>

				<td>{{item[4]}}</td>
				<td>{{item[5]}}</td>
				<td>{{item[6]}}</td>
				<td>{{item[7]}}</td>
				<td>{{item[8]}}</td>
				<td>{{item[9]}}</td>
				<td>{{item[10]}}</td>
				<td>{{item[11]}}</td>
				<td>{{item[12]}}</td>
				<td>{{item[13]}}</td>
				<td>{{item[14]}}</td>
				<td>{{item[15]}}</td>
				<td>{{item[16]}}</td>
				<td>{{item[17]}}</td>
				<td> {{item[18]}}</td> 
				<td> {{item[19]}} </td>
				<td> {{item[20]}} </td>
				<td> {{item[21]}} </td>
			</tr>
			{% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>



<div id="Graph" class="tabcontent">
	<div id="chart">
	</div>

	<br/> <br/> <br/> 

	<div id="chart2">
	</div>
</div>


</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
<script>
$(document).ready( function () {
    $('#dataTable').DataTable({
      "pagingType" : "simple_numbers",
				"bInfo" : false
    });
} );
</script>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>

	var tabledata = JSON.parse('{{ tabledata | tojson | safe}}');
	var y_axis = [];
	var x_axis = [];


	var tabledata2 = JSON.parse('{{ tabledata2 | tojson | safe}}');
	var y_axis2 = [];
	var x_axis2 = [];

	var i;

	for (i = 0; i < tabledata.length; i++) {
		y_axis.push(tabledata[i][1]);
		x_axis.push(tabledata[i][0]);
	}

	for (i = 0; i < tabledata2.length; i++) {
		y_axis2.push(tabledata2[i][1]);
		x_axis2.push(tabledata2[i][0]);
	}

	var options = {
          series: [{
            name: "No of Images",
            data: y_axis
        }],
          chart: {
          height: 350,
          type: 'line',
          zoom: {
            enabled: false
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: 'No of Images Uploaded vs Time(In month)',
          align: 'left'
        },
        grid: {
          row: {
            colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },


        xaxis: {
          categories: x_axis,
		  title: {
            text: 'Month(yyyy-mm)'
          }
        }

        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();



		var options2 = {
          series: [{
            name: "Authenticated users till date",
            data: y_axis2
        }],
          chart: {
          height: 350,
          type: 'line',
          zoom: {
            enabled: false
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: 'No of Authenticated users till date vs Time(In month)',
          align: 'left'
        },
        grid: {
          row: {
            colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },

        xaxis: {
          categories: x_axis2,
		  title: {
            text: 'Month(yyyy-mm)'
          }
        }

        };


		var chart2 = new ApexCharts(document.querySelector("#chart2"), options2);
        chart2.render();




</script>


<script>


	function onlyTabOpen(evt, timeZone){
		var i, tabcontent, tablinks;

		tabcontent = document.getElementsByClassName("tabcontent");
	  	for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
	  	}
	  	tablinks = document.getElementsByClassName("tablinks");
	  	for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className.replace(" active", "");
	  	}
	  	document.getElementById(timeZone).style.display = "block";
	  	evt.currentTarget.className += " active";

		}

	function opentimeZone(evt, timeZone){
		var filter=timeZone;
      	var http = new XMLHttpRequest();
      	http.open('GET',`/reports/clippr/all_requests?key=${filter}`)
      	http.setRequestHeader("Content-type", "application/json; charset=utf-8");
      	http.send();
	  	window.location.replace(`/reports/clippr/all_requests?key=${timeZone}`)  
	
	}

	window.onload = function() {

		if (window.location.href=="http://127.0.0.1:5000/reports/clippr/all_requests"){  
			onlyTabOpen(event, 'Table')
		}

		else if (window.location.href=="http://127.0.0.1:5000/reports/clippr/all_requests?key=Table"){
			onlyTabOpen(event, 'Table')
		}
		else{
			onlyTabOpen(event, 'Graph')
		}
	}
	
	</script>






<!-- <script>
    var someJavaScriptVar = '{{ rows[1] }}';
	console.log(someJavaScriptVar)

</script> -->

